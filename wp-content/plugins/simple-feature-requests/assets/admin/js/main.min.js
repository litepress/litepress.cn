!function(c,t){var a={on_ready:function(){a.setup_attachments()},setup_attachments:function(){var n,s=c(".jck-sfr-attachments");s.on("click",".jck-sfr-remove_attachment",function(){var a=c(this).parent().data("attachment_id"),t=c('[name="jck_sfr_attachments"]').val(),t=t?t.split(","):[];c(this).parent().remove(),t=t.filter(function(t){return t!=a}),c('[name="jck_sfr_attachments"]').val(t.join(","))}),c(".jck-sfr-add_attachments").on("click",function(t){t.preventDefault(),n||(n=wp.media.frames.product_gallery=wp.media({title:jck_sfr_vars.il8n.choose_attachments,button:{text:jck_sfr_vars.il8n.add_attachments},states:[new wp.media.controller.Library({title:jck_sfr_vars.il8n.choose_attachments,filterable:"all",multiple:!0})]})).on("select",function(){var t=n.state().get("selection"),a=c('[name="jck_sfr_attachments"]').val(),e=a?a.split(","):[];t.map(function(t){var a;(t=t.toJSON()).id&&(a=(t.sizes&&t.sizes.thumbnail?t.sizes.thumbnail:t).url,s.append('<li class="jck-sfr-attachment" data-attachment_id="'+t.id+'"><img src="'+a+'" /><a href="#" class="jck-sfr-remove_attachment"></a></li>'),e.push(t.id))}),c('[name="jck_sfr_attachments"]').val(e.join(","))}),n.open()})}};c(t).ready(a.on_ready)}(jQuery,document);