function um_load_notifications(){um_load_notifications.inProcess||jQuery.ajax({url:wp.ajax.settings.url,type:"post",dataType:"json",data:{action:"um_notification_check_update",nonce:um_scripts.nonce},beforeSend:function(){um_load_notifications.inProcess=!0},complete:function(){um_load_notifications.inProcess=!1},success:function(i){if(!0===i.success){var n=jQuery(".um-notification-b, .header-notification-box");if(i.data.refresh_count&&(n.animate({bottom:"25px"}).addClass("has-new").find(".um-notification-live-count").html(i.data.refresh_count).show(),jQuery(document).trigger("um_notification_refresh_count",i.data),um_animate_bubble()),i.data.unread){var t=jQuery(i.data.unread).attr("data-notification_id");jQuery(i.data.unread).find(".b2").html();0===jQuery('.um-notification[data-notification_id="'+t+'"]').length||jQuery('.um-notification[data-notification_id="'+t+'"]').remove(),jQuery(".um-notification-ajax").prepend(i.data.unread),jQuery(".um-notifications-none").hide()}else jQuery(".um-notification-ajax .um-notification").length||jQuery(".um-notifications-none").show(),jQuery(".um-notification-live-count").html(0).hide(),1!=n.data("show-always")&&n.animate({bottom:"-220px"}).removeClass("has-new"),um_stop_bubble();jQuery.extend(um_notifications,i.data)}else console.error("UM: Request 'um_notification_check_update' failed.",i)}})}function um_animate_bubble(){jQuery(".um-notification-b").length&&jQuery(".um-notification-b").addClass("um-effect-pop")}function um_stop_bubble(){jQuery(".um-notification-b").length&&jQuery(".um-notification-b").removeClass("um-effect-pop")}function um_notification_responsive(){var i=jQuery(window).width();i<400?jQuery(".um-notification-live-feed").css({width:i+"px"}):jQuery(".um-notification-live-feed").css({width:"400px"})}function um_notification_sound(i,n){var t=jQuery(".um-notification-b, .header-notification-box");if(t.length&&t.hasClass("has-new")&&void 0!==um_notifications.unread_count&&void 0!==n.unread_count&&n.unread_count>um_notifications.unread_count){var o=new Audio(um_notifications.sound_url).play();void 0!==o&&o.then(function(i){console.log("Notification sound played!")}).catch(function(i){console.log(i.message)})}}jQuery(window).on("resize",function(){um_notification_responsive()}),jQuery(document).ready(function(){jQuery(".um-notification-photo").on("error",function(){jQuery(this).attr("src",jQuery(this).data("default"))}),jQuery(document).on("click",".um-notification-i-close",function(i){return i.preventDefault(),jQuery(".um-notification-live-feed").hide(),!1}),um_load_notifications(),um_notifications.timer&&setInterval(um_load_notifications,um_notifications.timer),parseInt(um_notifications.sound)&&um_notifications.sound_url&&jQuery(document).on("um_notification_refresh_count",um_notification_sound),jQuery(".um-notification-ajax").length&&(jQuery(".um-notification.unread").length||jQuery(".um-notification-live-count").html(0).hide()),jQuery(document.body).on("click",".um-notification-hide a",function(){var i=jQuery(this).parents(".um-notification").attr("data-notification_id"),n=jQuery(this).parents(".um-notification-live-feed");(jQuery(this).parents(".um-notification").remove(),n.length)&&(n.find(".um-notification").length||(n.find(".um-notification-more").hide(),n.find(".um-notifications-none").show()));return jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_notification_delete_log",notification_id:i,nonce:um_scripts.nonce},success:function(i){}}),!1}),jQuery(document.body).on("click",".um-notification:not(.none)",function(){var i=jQuery(this).attr("data-notification_uri");i&&(window.location=i)}),jQuery(document.body).on("mouseenter",".um-notification:not(.none)",function(i){if(jQuery(this).hasClass("unread")){var n=jQuery(this).attr("data-notification_id");jQuery("*[data-notification_id="+n+"]").addClass("read").removeClass("unread"),jQuery(this).addClass("read").removeClass("unread"),new_live_count=parseInt(jQuery(".um-notification-live-count").html())-1,new_live_count<0&&(new_live_count=0),jQuery(".um-notification-live-count").html(new_live_count),0==new_live_count&&(jQuery(".um-notification-live-count").html(0).hide(),um_stop_bubble()),jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_notification_mark_as_read",notification_id:n,nonce:um_scripts.nonce},success:function(i){}})}}),jQuery(".um-notification-live-count").length&&0<parseInt(jQuery(".um-notification-live-count").html())&&jQuery(".um-notification-live-count").show(),jQuery(".um-notification-b").length&&(jQuery(".um-notification-b").hasClass("left")?jQuery(".um-notification-live-feed").css({left:"0"}):jQuery(".um-notification-live-feed").css({right:"0"}),jQuery(document.body).on("click",".um-notification-b",function(i){i.preventDefault();var n=jQuery(".um-notification-live-feed");return n.is(":hidden")?(um_notification_responsive(),n.show()):n.hide(),!1}))});