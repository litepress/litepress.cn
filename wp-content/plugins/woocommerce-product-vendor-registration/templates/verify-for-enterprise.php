<?php
/**
 * 企业实名模板
 *
 * @package WP_REAL_PERSON_VERIFY
 */

$personal_name = get_user_meta( get_current_user_id(), 'wprpv_real_name', true );
?>
<link href="https://cdn.bootcdn.net/ajax/libs/bootstrap-fileinput/5.1.5/css/fileinput.min.css" rel="stylesheet">

<article class="container step-personal-article">
<div class="step-personal theme-boxshadow bg-white">
<h1 class="title"><i class="fad fa-building"></i> 企业认证</h1>
<small class="des">
    本次认证通过调用阿里云的实人认证API接口自动完成<br>
    如果认证时遇到问题，请联系客服QQ: 1642491905
</small>
<hr class="dropdown-divider">
<form class="step-personal-form mt-4 needs-validation" novalidate enctype="multipart/form-data">
    <section>
    <label class="form-label">企业信息</label>
    <div class="form-floating">
        <input type="text" class="form-control" id="enterprise_name" placeholder="企业名称" required >
        <label for="floatingInput" class="col-sm-2 col-form-label">企业名称</label>
        <div class="invalid-feedback">
            请输入正确企业名称。
        </div>
    </div>
    <div class="form-floating">
        <input type="text" class="form-control" id="enterprise_code" placeholder="社会信用代码" required pattern="^([0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}|[1-9]\d{14})$">
        <label for="floatingInput">社会信用代码</label>
        <div class="invalid-feedback">
            请输入正确社会信用代码。
        </div>
    </div>

        <label class="form-label">营业执照</label>
        <!--<input type="file" class="form-control" aria-label="file example" required>-->

       <div class="form-group">

            <div class="fileinput fileinput-new" data-provides="fileinput"  id="exampleInputUpload">
                <div class="fileinput-new thumbnail" style="width: 200px;height: auto;max-height:150px;">
                    <svg t="1619084760620" class="icon" viewBox="0 0 1536 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1310" width="72" height="72"><path d="M1518.08 1024H17.92c-10.24 0-17.92-7.68-17.92-17.066667V17.066667C0 7.68 7.68 0 17.92 0h1500.16c10.24 0 17.92 7.68 17.92 17.066667v989.866666c0 9.386667-7.68 17.066667-17.92 17.066667z" fill="#F8B62D" p-id="1311"></path><path d="M1473.706667 980.48H62.293333c-11.093333 0-19.626667-8.533333-19.626666-17.92V59.733333c0-10.24 8.533333-17.92 19.626666-17.92h1411.413334c11.093333 0 19.626667 8.533333 19.626666 17.92v901.973334c0 11.093333-8.533333 18.773333-19.626666 18.773333z" fill="#FFFFFF" p-id="1312"></path><path d="M179.2 680.106667h119.466667v34.133333H179.2zM349.866667 680.106667h170.666666v34.133333H349.866667zM179.2 761.173333h119.466667v34.133334H179.2zM349.866667 761.173333h913.066666v34.133334H349.866667zM1134.933333 934.4h256v16.213333h-256z" fill="#BBBBBB" p-id="1313"></path><path d="M878.933333 281.6c0 28.16-25.6 50.346667-55.466666 50.346667h-110.933334c-30.72 0-55.466667-22.186667-55.466666-50.346667v-0.853333c0-28.16 24.746667-51.2 55.466666-51.2h110.933334c29.866667 0 55.466667 23.04 55.466666 51.2v0.853333z" fill="#D74515" p-id="1314"></path><path d="M640 186.88c0 70.826667 57.173333 128 128 128s128-57.173333 128-128-57.173333-128-128-128-128 57.173333-128 128z" fill="#F8B62D" p-id="1315"></path><path d="M657.066667 186.88c0 61.44 49.493333 110.933333 110.933333 110.933333s110.933333-49.493333 110.933333-110.933333-49.493333-110.933333-110.933333-110.933333-110.933333 49.493333-110.933333 110.933333z" fill="#E94915" p-id="1316"></path><path d="M237.226667 434.346667H247.466667c18.773333 20.48 40.96 37.546667 65.706666 48.64l-7.68 13.653333c-24.746667-12.8-46.08-29.013333-63.146666-50.346667-16.213333 19.626667-37.546667 35.84-64 50.346667l-7.68-12.8c26.453333-13.653333 48.64-29.866667 66.56-49.493333z m1.706666 40.96h14.506667v32.426666h40.106667v13.653334h-40.106667V554.666667h51.2v13.653333H177.493333V554.666667h22.186667v-58.026667h14.506667V554.666667h25.6v-79.36zM370.346667 435.2h14.506666v119.466667h17.92V435.2h14.506667v119.466667h44.373333v14.506666H325.973333V554.666667h44.373334V435.2z m75.093333 28.16l12.8 3.413333c-5.973333 26.453333-12.8 48.64-22.186667 68.266667l-12.8-4.266667c8.533333-17.066667 16.213333-40.106667 22.186667-67.413333z m-104.106667 0c7.68 20.48 14.506667 43.52 20.48 69.973333l-12.8 3.413334c-5.12-23.893333-11.946667-46.933333-19.626666-69.12l11.946666-4.266667z m215.04-29.013333h14.506667v23.04h37.546667v13.653333h-37.546667v24.746667h41.813333v13.653333H563.2c-8.533333 20.48-16.213333 34.986667-23.04 45.226667 17.066667-1.706667 33.28-4.266667 49.493333-7.68-4.266667-8.533333-7.68-15.36-11.946666-23.04l13.653333-4.266667c8.533333 15.36 17.066667 31.573333 23.893333 48.64l-13.653333 5.973333c-1.706667-5.12-4.266667-10.24-5.973333-14.506666-22.186667 4.266667-46.933333 7.68-73.386667 10.24l-3.413333-12.8c0.853333-0.853333 2.56-0.853333 3.413333-1.706667 6.826667-5.973333 15.36-21.333333 25.6-46.08h-33.28v-13.653333h41.813333v-24.746667h-34.986666v-13.653333h34.986666v-23.04z m-65.706666 1.706666c9.386667 7.68 17.92 15.36 24.746666 22.186667l-10.24 10.24c-5.973333-6.826667-14.506667-14.506667-24.746666-23.04l10.24-9.386667z m-4.266667 34.986667c8.533333 7.68 16.213333 15.36 23.04 23.04l-10.24 10.24c-5.12-6.826667-12.8-14.506667-23.04-23.04l10.24-10.24z m15.36 42.666667l12.8 5.12c-6.826667 18.773333-13.653333 36.693333-21.333333 53.76l-14.506667-5.973334c8.533333-17.066667 16.213333-34.986667 23.04-52.906666z m202.24-79.36c0 13.653333-0.853333 24.746667-0.853333 34.133333 8.533333 40.106667 30.72 70.826667 64.853333 92.16l-9.386667 12.8c-29.013333-19.626667-49.493333-45.226667-60.586666-77.653333-10.24 31.573333-30.72 58.026667-63.146667 78.506666l-8.533333-12.8c40.96-24.746667 62.293333-58.88 63.146666-102.4V435.2h14.506667z m105.813333 54.613333h78.506667v32.426667h-78.506667v-32.426667z m65.706667 22.186667v-11.093334h-52.053333v11.093334h52.053333z m27.306667 18.773333v44.373333h-13.653334v-5.973333H810.666667v5.973333h-14.506667v-44.373333h106.666667z m-93.013334 26.453333h78.506667v-14.506666h-78.506667v14.506666zM783.36 443.733333h33.28v-9.386666h14.506667V443.733333h36.693333v-9.386666h14.506667V443.733333h33.28v12.8h-33.28v7.68h-14.506667v-7.68h-36.693333v7.68h-14.506667v-7.68h-33.28V443.733333z m128 24.746667v29.866667h-13.653333v-17.92H799.573333v18.773333h-13.653333v-30.72h125.44z m65.706667-33.28h14.506666v119.466667h17.92V435.2h14.506667v119.466667h44.373333v14.506666h-134.826666V554.666667h44.373333V435.2z m75.093333 28.16l12.8 3.413333c-5.973333 26.453333-12.8 48.64-22.186667 68.266667l-12.8-4.266667c8.533333-17.066667 15.36-40.106667 22.186667-67.413333z m-104.106667 0c7.68 20.48 14.506667 43.52 20.48 69.973333l-12.8 3.413334c-5.12-23.893333-11.946667-46.933333-19.626666-69.12l11.946666-4.266667z m259.413334 110.08c-7.68 0-12.8-4.266667-16.213334-12.8s-5.12-25.6-5.12-52.053333v-35.84h-17.92v15.36c0 8.533333-0.853333 15.36-1.706666 23.04 6.826667 5.12 12.8 10.24 19.626666 15.36l-8.533333 12.8c-5.12-4.266667-9.386667-8.533333-13.653333-11.946667-5.12 20.48-14.506667 35.84-28.16 47.786667l-11.093334-9.386667c13.653333-11.093333 22.186667-27.306667 26.453334-47.786667-5.973333-4.266667-11.946667-7.68-17.92-11.093333l7.68-11.946667c4.266667 1.706667 8.533333 4.266667 11.946666 6.826667 0.853333-4.266667 0.853333-9.386667 0.853334-13.653333v-15.36h-17.92v-13.653334h17.92V435.2h14.506666v23.893333h32.426667v49.493334c0 20.48 0.853333 33.28 1.706667 38.4 0.853333 5.973333 1.706667 8.533333 4.266666 8.533333 0.853333 0 2.56-2.56 3.413334-7.68 0.853333-4.266667 1.706667-9.386667 1.706666-15.36l11.946667 5.973333c-1.706667 14.506667-4.266667 23.893333-6.826667 28.16-3.413333 4.266667-5.973333 6.826667-9.386666 6.826667z m-105.813334-0.853333h-14.506666l-3.413334-13.653334c4.266667 0.853333 8.533333 0.853333 12.8 0.853334 3.413333 0 5.973333-1.706667 5.973334-5.12v-32.426667c-5.973333 1.706667-11.946667 4.266667-17.066667 5.973333l-3.413333-13.653333c6.826667-1.706667 13.653333-3.413333 21.333333-5.973333v-31.573334H1083.733333v-13.653333h17.92v-27.306667h14.506667v27.306667h12.8v13.653333h-12.8V503.466667c5.12-1.706667 9.386667-4.266667 13.653333-6.826667v14.506667c-4.266667 1.706667-9.386667 4.266667-13.653333 5.973333v41.813333c0 8.533333-5.12 13.653333-14.506667 13.653334z m139.093334-133.12h46.08v93.013333h-46.08V439.466667z m33.28 80.213333v-27.306667h-18.773334v27.306667h18.773334z m-18.773334-40.106667h18.773334V452.266667h-18.773334v27.306666z m41.813334 11.093334h65.706666v41.813333H1297.066667v-41.813333z m52.053333 29.866666v-17.066666h-37.546667v17.066666h37.546667z m-34.133333-67.413333h-19.626667v-13.653333h71.68c-0.853333 18.773333-1.706667 30.72-4.266667 35.84-2.56 6.826667-7.68 10.24-16.213333 10.24-3.413333 0-6.826667 0-11.093333-0.853334l-4.266667-12.8c5.12 0.853333 10.24 0.853333 13.653333 0.853334 3.413333 0 5.12-2.56 5.973334-5.973334 0.853333-1.706667 1.706667-6.826667 1.706666-14.506666h-23.04c-2.56 16.213333-12.8 27.306667-31.573333 34.986666l-7.68-11.946666c14.506667-4.266667 22.186667-11.946667 24.746667-22.186667z m-65.706667 84.48l12.8 3.413333c-3.413333 12.8-6.826667 23.893333-11.946667 34.133334l-12.8-5.12c4.266667-7.68 8.533333-18.773333 11.946667-32.426667z m39.253333 3.413333c2.56 9.386667 5.12 19.626667 7.68 30.72l-13.653333 3.413334c-1.706667-11.946667-4.266667-22.186667-6.826667-30.72l12.8-3.413334z m32.426667-1.706666c4.266667 9.386667 7.68 20.48 10.24 31.573333l-13.653333 3.413333c-2.56-11.946667-5.973333-23.04-10.24-32.426666l13.653333-2.56z m31.573333-3.413334c8.533333 11.946667 14.506667 21.333333 19.626667 30.72l-11.946667 7.68c-5.12-9.386667-11.093333-19.626667-18.773333-31.573333l11.093333-6.826667z" fill="#FF8A00" p-id="1317"></path><path d="M1266.346667 963.413333c-61.44 0-110.933333-49.493333-110.933334-110.933333s49.493333-110.933333 110.933334-110.933333 110.933333 49.493333 110.933333 110.933333-50.346667 110.933333-110.933333 110.933333z m0-17.066666c52.053333 0 94.72-41.813333 94.72-93.866667s-42.666667-93.866667-94.72-93.866667-94.72 41.813333-94.72 93.866667 41.813333 93.866667 94.72 93.866667z" fill="#FFA0A0" p-id="1318"></path><path d="M1263.786667 880.64l-24.746667 14.506667 5.12-30.72-20.48-22.186667 28.16-4.266667 11.946667-28.16 12.8 28.16 28.16 4.266667-20.48 22.186667 5.12 30.72z" fill="#FFA0A0" p-id="1319"></path></svg>
                </div>
                <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"></div>
                <div class="btn-file-div">
                        <span class="btn btn-primary btn-file">
                            <span class="fileinput-new">选择文件</span>
                            <span class="fileinput-exists">换一张</span>
                            <input type="file" class="form-control" name="file" id="enterprise_license_img" required accept="image/gif,image/jpeg,image/x-png"/>

                        </span>


                    <a href="javascript:;" class="btn btn-outline-primary fileinput-exists" data-dismiss="fileinput">移除</a>
                </div>
                <div class="invalid-feedback">            请上传营业执照。        </div>
            </div>
        </div>

    </section>
    <section>
    <label  class="form-label">法人信息</label>
        <?php if ( ! empty( $personal_name ) && 'true' !== $_GET['re'] ): ?>
        <div class="form-floating">
            您已实名为：<?php echo $personal_name ?> | <a href="?re=true">点我更换身份</a>
        </div>
        <?php else: ?>
        <div class="form-floating">
            <input type="text" class="form-control" id="realname" placeholder="真实姓名" required pattern="^([\u4e00-\u9fa5]{1,20}|[a-zA-Z\.\s]{1,20})$">
            <label for="floatingInput" class="col-sm-2 col-form-label">真实姓名</label>
            <div class="invalid-feedback">
                请输入真实姓名。
            </div>
        </div>
        <div class="form-floating">
            <input type="text" class="form-control" id="cert_no" placeholder="身份证号" required pattern="^[1-9]\d{5}(18|19|20|(3\d))\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$">
            <label for="floatingInput">身份证号</label>
            <div class="invalid-feedback">
                请输入真实身份证号码。
            </div>
        </div>
<!--    <div class="form-floating">
        <input type="text" class="form-control" id="floatingInput" placeholder="手机号码">
        <label for="floatingInput">手机号码</label>
    </div>-->
        <?php endif; ?>
    </section>

    <!-- Button trigger modal -->
    <button type="button" value="button" id="ali-authentication-enterprise-btn" class="btn btn-primary">
        前往微信扫脸
    </button>
    <!-- Modal -->
    <div class="modal fade " id="ali-authentication-modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" >微信扫脸认证</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" ></button>
                </div>
                <div class="modal-body">
                    <p>请扫描二维码前往微信扫脸认证</p>
                    <small class="authentication-message fade show alert-warning">获取中<i class="loading"></i></small>
                    <div id="qrcode" class="mt-3"></div>

                </div>
                                    <!--<div class="modal-footer">
                                        <button type="button" class="btn btn-primary">我已完成认证</button>
                                    </div>-->
            </div>
        </div>
    </div>
</form>
</div>
</article>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>