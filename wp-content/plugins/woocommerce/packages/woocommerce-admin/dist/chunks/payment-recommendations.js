(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[44,51],{551:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(7);function c(e){const{createNotice:t}=Object(o.dispatch)("core/notices");e.error_data&&e.errors&&Object.keys(e.errors).length?Object.keys(e.errors).forEach(n=>{t("error",e.errors[n].join(" "))}):e.message&&t(e.code?"error":"success",e.message)}},553:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n(2),s=n(12),r=n(19),a=n.n(r),i=n(23),m=n(554);t.default=()=>{const e="1"===Object(s.getQuery)()["wcpay-connection-success"],[t,n]=Object(o.useState)(e);if(!t)return null;const r=()=>{n(!1),Object(s.updateQueryString)({"wcpay-connection-success":void 0})},l=Object(c.__)("Help us build a better WooCommerce Payments experience",'woocommerce'),d=a()({mixedString:Object(c.__)("By agreeing to share non-sensitive {{link}}usage data{{/link}}, youâ€™ll help us improve features and optimize the WooCommerce Payments experience. You can opt out at any time.",'woocommerce'),components:{link:Object(o.createElement)(i.Link,{href:"https://woocommerce.com/usage-tracking",target:"_blank",type:"external"})}});return Object(o.createElement)(m.a,{isDismissible:!1,title:l,message:d,acceptActionText:Object(c.__)("I agree",'woocommerce'),dismissActionText:Object(c.__)("No thanks",'woocommerce'),onContinue:r,onClose:r})}},554:function(e,t,n){"use strict";var o=n(0),c=n(2),s=n(15),r=n(7),a=n(19),i=n.n(a),m=n(4),l=n(23),d=n(11),u=n(140);class p extends o.Component{constructor(e){super(e),this.state={isLoadingScripts:!1,isRequestStarted:!1}}async componentDidUpdate(e,t){const{hasErrors:n,isRequesting:o,onClose:s,onContinue:r,createNotice:a}=this.props,{isLoadingScripts:i,isRequestStarted:m}=this.state;if(!m)return;const l=!o&&!i&&(e.isRequesting||t.isLoadingScripts)&&!n,d=!o&&e.isRequesting&&n;l&&(s(),r()),d&&(a("error",Object(c.__)("There was a problem updating your preferences",'woocommerce')),s())}updateTracking({allowTracking:e}){const{updateOptions:t}=this.props;e&&"function"==typeof window.wcTracks.enable?(this.setState({isLoadingScripts:!0}),window.wcTracks.enable(()=>{this._isMounted&&(Object(u.initializeExPlat)(),this.setState({isLoadingScripts:!1}))})):e||(window.wcTracks.isEnabled=!1);const n=e?"yes":"no";this.setState({isRequestStarted:!0}),t({woocommerce_allow_tracking:n})}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){if(this.props.allowTracking){const{onClose:e,onContinue:t}=this.props;return e(),t(),null}const{isRequesting:e,title:t=Object(c.__)("Build a better WooCommerce",'woocommerce'),message:n=i()({mixedString:Object(c.__)("Get improved features and faster fixes by sharing non-sensitive data via {{link}}usage tracking{{/link}} that shows us how WooCommerce is used. No personal data is tracked or stored.",'woocommerce'),components:{link:Object(o.createElement)(l.Link,{href:"https://woocommerce.com/usage-tracking",target:"_blank",type:"external"})}}),dismissActionText:s=Object(c.__)("No thanks",'woocommerce'),acceptActionText:r=Object(c.__)("Yes, count me in!",'woocommerce')}=this.props,{isRequestStarted:a}=this.state,d=a&&e;return Object(o.createElement)(m.Modal,{title:t,isDismissible:this.props.isDismissible,onRequestClose:()=>this.props.onClose(),className:"woocommerce-usage-modal"},Object(o.createElement)("div",{className:"woocommerce-usage-modal__wrapper"},Object(o.createElement)("div",{className:"woocommerce-usage-modal__message"},n),Object(o.createElement)("div",{className:"woocommerce-usage-modal__actions"},Object(o.createElement)(m.Button,{isSecondary:!0,isBusy:d,onClick:()=>this.updateTracking({allowTracking:!1})},s),Object(o.createElement)(m.Button,{isPrimary:!0,isBusy:d,onClick:()=>this.updateTracking({allowTracking:!0})},r))))}}t.a=Object(s.compose)(Object(r.withSelect)(e=>{const{getOption:t,getOptionsUpdatingError:n,isOptionsUpdating:o}=e(d.OPTIONS_STORE_NAME);return{allowTracking:"yes"===t("woocommerce_allow_tracking"),isRequesting:Boolean(o()),hasErrors:Boolean(n())}}),Object(r.withDispatch)(e=>{const{createNotice:t}=e("core/notices"),{updateOptions:n}=e(d.OPTIONS_STORE_NAME);return{createNotice:t,updateOptions:n}}))(p)},560:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return o.default}));var o=n(553),c=n(2),s=n(0),r=n(7),a=n(12);class i extends s.Component{componentDidMount(){const{createNotice:e,markConfigured:t}=this.props;Object(a.getQuery)()["wcpay-connection-success"]&&(e("success",Object(c.__)("WooCommerce Payments connected successfully.",'woocommerce')),t("wcpay",{"wcpay-connection-success":"1"}))}render(){return null}}var m=Object(r.withDispatch)(e=>{const{createNotice:t}=e("core/notices");return{createNotice:t}})(i);function l(e){const t=["US","PR"];return window.wcAdminFeatures&&window.wcAdminFeatures["wcpay/support-international-countries"]&&t.push("AU","CA","DE","ES","FR","GB","IE","IT","NZ"),t.includes(e)}var d=n(20),u=n.n(d),p=n(11),_=n(18),w=n(551);function O(e,t,n){const o=Object(c.__)("There was an error connecting to WooCommerce Payments. Please try again or connect later in store settings.",'woocommerce');n(["woocommerce-payments"]).then(()=>{Object(_.recordEvent)("woocommerce_payments_install",{context:"tasklist"}),u()({path:p.WC_ADMIN_NAMESPACE+"/plugins/connect-wcpay",method:"POST"}).then(e=>{window.location=e.connectUrl}).catch(()=>{t("error",o),e()})}).catch(t=>{Object(w.a)(t),e()})}},630:function(e,t,n){"use strict";var o=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.size,c=void 0===n?24:n,s=e.onClick,a=(e.icon,e.className),i=function(e,t){var n={};for(var o in e)0<=t.indexOf(o)||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["size","onClick","icon","className"]),m=["gridicon","gridicons-external",a,(t=c,!(0!=t%18)&&"needs-offset"),!1,!1].filter(Boolean).join(" ");return r.default.createElement("svg",o({className:m,height:c,width:c,onClick:s},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),r.default.createElement("g",null,r.default.createElement("path",{d:"M19 13v6c0 1.105-.895 2-2 2H5c-1.105 0-2-.895-2-2V7c0-1.105.895-2 2-2h6v2H5v12h12v-6h2zM13 3v2h4.586l-7.793 7.793 1.414 1.414L19 6.414V11h2V3h-8z"})))};var c,s=n(5),r=(c=s)&&c.__esModule?c:{default:c};e.exports=t.default},631:function(e,t,n){},648:function(e,t,n){"use strict";n.r(t),n.d(t,"getPaymentRecommendationData",(function(){return h}));var o=n(0),c=n(2),s=n(7),r=n(32),a=n(4),i=n(23),m=n(22),l=n(11),d=n(18),u=n(630),p=n.n(u),_=(n(631),n(70)),w=n(17),O=n(551),g=n(560);const b="woocommerce_setting_payments_recommendations_hidden";function h(e){const{getOption:t,isResolving:n}=e(l.OPTIONS_STORE_NAME),{getSettings:o}=e(l.SETTINGS_STORE_NAME),{getRecommendedPlugins:c}=e(l.PLUGINS_STORE_NAME),{general:s={}}=o("general"),r=t("woocommerce_show_marketplace_suggestions"),a=t(b),i=s.woocommerce_default_country?Object(_.b)(s.woocommerce_default_country):null,m=!!i&&Object(g.d)(i),d=!(n("getOption",[b])||n("getOption",["woocommerce_show_marketplace_suggestions"]))&&"yes"!==a&&"yes"===r&&m;let u;return d&&(u=c("payments")),{displayable:d,recommendedPlugins:u}}t.default=()=>{const[e,t]=Object(o.useState)(null),{updateOptions:n}=Object(s.useDispatch)(l.OPTIONS_STORE_NAME),{installAndActivatePlugins:u}=Object(s.useDispatch)(l.PLUGINS_STORE_NAME),{displayable:_,recommendedPlugins:g}=Object(s.useSelect)(h),j=Object(o.useRef)(!1),y=_&&g&&g.length>0;if(Object(o.useEffect)(()=>{y&&!j.current&&(j.current=!0,Object(d.recordEvent)("settings_payments_recommendations_pageview",{}))},[y]),!y)return null;const f=()=>{Object(d.recordEvent)("settings_payments_recommendations_dismiss",{}),n({[b]:"yes"})},E=(g||[]).map(n=>({key:n.slug,title:Object(o.createElement)(o.Fragment,null,n.title,n.recommended&&Object(o.createElement)(i.Pill,null,Object(c.__)("Recommended",'woocommerce'))),content:Object(r.decodeEntities)(n.copy),after:Object(o.createElement)(a.Button,{isSecondary:!0,onClick:()=>(n=>{e||(t(n.product),Object(d.recordEvent)("settings_payments_recommendations_setup",{extension_selected:n.product}),u([n.product]).then(()=>{window.location.href=Object(w.g)(n["setup-link"].replace("/wp-admin/",""))}).catch(e=>{Object(O.a)(e),t(null)}))})(n),isBusy:e===n.product,disabled:!!e},n["button-text"]),before:Object(o.createElement)("img",{src:n.icon,alt:""})}));return Object(o.createElement)(a.Card,{size:"large",className:"woocommerce-recommended-payments-card"},Object(o.createElement)(a.CardHeader,{size:"medium"},Object(o.createElement)("div",{className:"woocommerce-recommended-payments-card__header"},Object(o.createElement)(m.Text,{variant:"title.small",as:"p",size:"20",lineHeight:"28px"},Object(c.__)("Recommended ways to get paid",'woocommerce')),Object(o.createElement)(m.Text,{className:"woocommerce-recommended-payments__header-heading",variant:"caption",as:"p",size:"12",lineHeight:"16px"},Object(c.__)('We recommend adding one of the following payment extensions to your store. The extension will be installed and activated for you when you click "Get started".','woocommerce'))),Object(o.createElement)("div",{className:"woocommerce-card__menu woocommerce-card__header-item"},Object(o.createElement)(i.EllipsisMenu,{label:Object(c.__)("Task List Options",'woocommerce'),renderContent:()=>Object(o.createElement)("div",{className:"woocommerce-review-activity-card__section-controls"},Object(o.createElement)(a.Button,{onClick:f},Object(c.__)("Hide this",'woocommerce')))}))),Object(o.createElement)(a.CardBody,null,Object(o.createElement)(i.List,{items:E})),Object(o.createElement)(a.CardFooter,null,Object(o.createElement)(a.Button,{href:"https://woocommerce.com/product-category/woocommerce-extensions/payment-gateways/?utm_source=payments_recommendations",target:"_blank",isTertiary:!0},Object(c.__)("See more options",'woocommerce'),Object(o.createElement)(p.a,{size:18}))))}}}]);