jQuery(document).ready(function(i){"use strict";i.wc_product_vendors_vendor_admin={showHideBookings:function(){"booking"!==i("select#product-type").val()?i(".show_if_booking").hide():"booking"===i("select#product-type").val()&&i(".show_if_booking").show()},init:function(){i("#your-profile tr.show-admin-bar").remove(),wcpv_vendor_admin_local.isPendingVendor&&i("#dashboard-widgets").html('<p class="wcpv-pending-vendor-message">'+wcpv_vendor_admin_local.pending_vendor_message+"</p>"),i(".taxonomy-wcpv_product_vendors, .toplevel_page_wcpv-vendor-settings").on("click",".wcpv-upload-logo",function(e){e.preventDefault();var o=wcpv_vendor_admin_local,t=i(this).parents(".form-field").find('input[name="vendor_data[logo]"]'),r=i(this).parents(".form-field").find(".wcpv-logo-preview-image"),n=wp.media.frames.mediaFrame=wp.media({title:o.modalLogoTitle,button:{text:o.buttonLogoText},library:{type:"image"},multiple:!1});n.on("select",function(){n.state().get("selection").map(function(e){(e=e.toJSON()).id&&(t.val(e.id),r.prop("src",e.url).removeClass("hide"),i(t).parents(".form-field").find(".wcpv-remove-image").show())})}),n.open()}),i(".taxonomy-wcpv_product_vendors, .toplevel_page_wcpv-vendor-settings").on("click",".wcpv-remove-image",function(e){e.preventDefault(),i(this).hide(),i(this).parents(".form-field").find(".wcpv-logo-preview-image").prop("src","").addClass("hide"),i('input[name="vendor_data[logo]"]').val("")}),i(".vendor #catalog-visibility").hide(),i("#general_product_data #_tax_status").prop("disabled",!0).parents(".options_group").hide(),i("#product_shipping_class").parents(".options_group").hide(),i(document.body).on("woocommerce_variations_loaded woocommerce_variations_added",function(){i('select[id^="variable_shipping_class"]').parent("p").hide(),i('select[name^="variable_tax_class"]').parent("p").hide()}),i("#wpadminbar").on("click",".wcpv-vendor-switch",function(e){e.preventDefault();var o={action:"wc_product_vendors_switch",switch_vendor_nonce:i(this).find("#wcpv_vendor_switch_nonce").val(),vendor:i(this).find(".wcpv-vendor").val()};i.post(wcpv_vendor_admin_local.ajaxurl,o,function(e){"switched"===e&&location.reload(!0)})}),i(document.body).on("submit","form.wcpv-vendor-support-form",function(e){e.preventDefault();var o={action:"wc_product_vendors_vendor_support",ajaxVendorSupportNonce:wcpv_vendor_admin_local.ajaxVendorSupportNonce,form_items:i(this).serialize()},r=i(this);i(".wcpv-vendor-support-form-message").remove(),r.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),i.post(wcpv_vendor_admin_local.ajaxurl,o,function(e){if(r.unblock(),e.length&&"success"===e)r.before('<p class="wcpv-vendor-support-form-success wcpv-vendor-support-form-message">'+wcpv_vendor_admin_local.vendorSupportSuccess+"</p>"),i("input, textarea",r).not('input[type="submit"]').val("");else{var t="";i.each(e.errors,function(e,o){t+='<span class="error">'+o+"</span>"}),r.before('<div class="wcpv-vendor-support-form-errors wcpv-vendor-support-form-message">'+t+"</div")}})}),i("#woocommerce-order-notes").on("click","a.add_note",function(){if(i("textarea#add_order_note").val()){i("#woocommerce-order-notes").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var e={action:"wc_product_vendors_vendor_add_order_note",post_id:i(this).data("id"),note:i("textarea#add_order_note").val(),note_type:i("select#order_note_type").val(),security:wcpv_vendor_admin_local.ajaxAddOrderNoteNonce};return i.post(wcpv_vendor_admin_local.ajaxurl,e,function(e){i("ul.order_notes").prepend(e),i("#woocommerce-order-notes").unblock(),i("#add_order_note").val("")}),!1}}),i(document.body).on("woocommerce_added_attribute",function(){i("#product_attributes").find(".add_new_attribute").remove()}),i(document.body).on("woocommerce-product-type-change",function(){i("._tax_status_field").parent().remove(),i("._tax_status_field").remove(),i("._tax_class_field").parent().remove(),i("._tax_class_field").remove(),i.wc_product_vendors_vendor_admin.showHideBookings()}),i(".inline-edit-col .product_shipping_class-checklist").prev().prev(".title.inline-edit-categories-label").remove(),i(".inline-edit-col .product_shipping_class-checklist").remove(),i(".tax_status").parent().prev(".title").remove(),i(".tax_status").remove(),i(".tax_class").parent().prev(".title").remove(),i(".tax_class").remove(),i(".shipping_class").parent().prev(".title").remove(),i(".shipping_class").remove(),i(".pass-shipping-tax").parent().prev(".title").remove(),i(".pass-shipping-tax").remove(),i(".inline-edit-product select.featured").parents("label").eq(0).remove(),i(".inline-edit-product label.featured").remove(),i(".inline-edit-product select.visibility").parents("label").eq(0).remove(),i(".inline-edit-product select.visibility").closest("label").remove();var e=i("#woocommerce-customer-data").find("tr.view");e.length&&e.find("a").not('[href*="wcpv-vendor-order"]').remove(),i.wc_product_vendors_vendor_admin.showHideBookings(),i("#product_attributes").find(".add_new_attribute").remove()}},i.wc_product_vendors_vendor_admin.init()});
